<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Painel de Controle</title>
  <style>
    body { font-family: Arial; background: #121212; color: #fff; text-align: center; padding: 30px; }
    button { margin: 10px; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
    .start { background: #2ecc71; }
    .stop { background: #e74c3c; }
    .restart { background: #f39c12; }
    .ip { background: #3498db; }
    #console { margin-top: 20px; background: #333; padding: 10px; border-radius: 5px; white-space: pre; text-align: left; max-width: 600px; margin: 20px auto; }
  </style>
</head>
<body>
  <h1>Painel do Servidor</h1>
  <button class="start" onclick="controlar('iniciar')">Iniciar</button>
  <button class="stop" onclick="controlar('parar')">Parar</button>
  <button class="restart" onclick="controlar('reiniciar')">Reiniciar</button>
  <button class="ip" onclick="mostrarIP()">Ver IP</button>
  <div id="status">Status: Carregando...</div>
  <div id="jogadores">Jogadores: Carregando...</div>
  <div id="console">Console: Apenas leitura.</div>

  <script>
    const API = 'https://server-3-6by0.onrender.com/'; // Exemplo: https://meu-backend.onrender.com

    async function atualizarStatus() {
      const res = await fetch(`${API}/status`);
      const data = await res.json();
      document.getElementById('status').textContent = 'Status: ' + data.status;
    }

    async function mostrarIP() {
      const res = await fetch(`${API}/ip`);
      const data = await res.json();
      alert('IP: ' + data.ip);
    }

    async function controlar(acao) {
      const res = await fetch(`${API}/${acao}`, { method: 'POST' });
      const data = await res.json();
      alert(data.message);
      atualizarStatus();
    }

    async function atualizarJogadores() {
      const res = await fetch(`${API}/jogadores`);
      const data = await res.json();
      document.getElementById('jogadores').textContent = `Jogadores: ${data.total} - ${data.jogadores.join(', ')}`;
    }

    async function atualizarConsole() {
      const res = await fetch(`${API}/console`);
      const data = await res.json();
      document.getElementById('console').textContent = data.console;
    }

    setInterval(() => {
      atualizarStatus();
      atualizarJogadores();
      atualizarConsole();
    }, 5000);

    atualizarStatus();
    atualizarJogadores();
    atualizarConsole();
  </script>
</body>
</html>
